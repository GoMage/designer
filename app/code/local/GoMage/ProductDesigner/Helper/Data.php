<?php eval(base64_decode("LyoqICogR29NYWdlIFByb2R1Y3QgRGVzaWduZXIgRXh0ZW5zaW9uICogKiBAY2F0ZWdvcnkgRXh0ZW5zaW9uICogQGNvcHlyaWdodCBDb3B5cmlnaHQgKGMpIDIwMTMtMjAxOCBHb01hZ2UgKGh0dHBzOi8vd3d3LmdvbWFnZS5jb20pICogQGF1dGhvciBHb01hZ2UgKiBAbGljZW5zZSBodHRwczovL3d3dy5nb21hZ2UuY29tL2xpY2Vuc2UtYWdyZWVtZW50LyBTaW5nbGUgZG9tYWluIGxpY2Vuc2UgKiBAdGVybXMgb2YgdXNlIGh0dHBzOi8vd3d3LmdvbWFnZS5jb20vdGVybXMtb2YtdXNlLyAqIEB2ZXJzaW9uIFJlbGVhc2U6IDIuNi4wICogQHNpbmNlIEF2YWlsYWJsZSBzaW5jZSBSZWxlYXNlIDEuMC4wICovIGNsYXNzIEdvTWFnZV9Qcm9kdWN0RGVzaWduZXJfSGVscGVyX0RhdGEgZXh0ZW5kcyBNYWdlX0NvcmVfSGVscGVyX0Fic3RyYWN0IHsgY29uc3QgQURWQU5DRURfTkFWSUdBVElPTl9NT0RVTEVfTkFNRSA9ICdHb01hZ2VfTmF2aWdhdGlvbic7IHByb3RlY3RlZCAkX2FsbG93ZWRQcm9kdWN0VHlwZXMgPSBhcnJheSggTWFnZV9DYXRhbG9nX01vZGVsX1Byb2R1Y3RfVHlwZTo6VFlQRV9TSU1QTEUsIE1hZ2VfQ2F0YWxvZ19Nb2RlbF9Qcm9kdWN0X1R5cGU6OlRZUEVfQ09ORklHVVJBQkxFICk7IHByb3RlY3RlZCAkX3Byb2R1Y3RTZXR0aW5nczsgcHJvdGVjdGVkICRfcHJvZHVjdERlc2lnbiA9IG51bGw7IHByb3RlY3RlZCAkX2VkaXRvckNvbmZpZyA9IG51bGw7IHB1YmxpYyBmdW5jdGlvbiBpc0VuYWJsZWQoKSB7IHJldHVybiBNYWdlOjpnZXRTdG9yZUNvbmZpZygnZ29tYWdlX2Rlc2lnbmVyL2dlbmVyYWwvZW5hYmxlZCcsIE1hZ2U6OmFwcCgpLT5nZXRTdG9yZSgpKTsgfSBwdWJsaWMgZnVuY3Rpb24gaXNOYXZpZ2F0aW9uRW5hYmxlZCgpIHsgcmV0dXJuIE1hZ2U6OmdldFN0b3JlQ29uZmlnKCdnb21hZ2VfZGVzaWduZXIvbmF2aWdhdGlvbi9lbmFibGVkJywgTWFnZTo6YXBwKCktPmdldFN0b3JlKCkpOyB9IHB1YmxpYyBmdW5jdGlvbiBhZHZhbmNlZE5hdmlnYXRpb25FbmFibGVkKCkgeyAkbW9kdWxlcyA9IChhcnJheSlNYWdlOjpnZXRDb25maWcoKS0+Z2V0Tm9kZSgnbW9kdWxlcycpLT5jaGlsZHJlbigpOyBpZiAoaXNzZXQoJG1vZHVsZXNbc2VsZjo6QURWQU5DRURfTkFWSUdBVElPTl9NT0RVTEVfTkFNRV0pKSB7ICRtb2R1bGUgPSAkbW9kdWxlc1tzZWxmOjpBRFZBTkNFRF9OQVZJR0FUSU9OX01PRFVMRV9OQU1FXTsgcmV0dXJuICRtb2R1bGUtPmlzKCdhY3RpdmUnKSAmJiBNYWdlOjpnZXRTdG9yZUNvbmZpZygnZ29tYWdlX25hdmlnYXRpb24vZ2VuZXJhbC9tb2RlJyk7IH0gcmV0dXJuIGZhbHNlOyB9IHB1YmxpYyBmdW5jdGlvbiBpc0VudGVycHJpc2VFZGl0aW9uKCkgeyAkbW9kdWxlcyA9IChhcnJheSlNYWdlOjpnZXRDb25maWcoKS0+Z2V0Tm9kZSgnbW9kdWxlcycpLT5jaGlsZHJlbigpOyByZXR1cm4gaXNzZXQoJG1vZHVsZXNbJ0VudGVycHJpc2VfVGFyZ2V0UnVsZSddKTsgfSBwdWJsaWMgZnVuY3Rpb24gaXNNb2R1bGVFeGlzdHMoJG1vZHVsZU5hbWUpIHsgJG1vZHVsZXMgPSAoYXJyYXkpTWFnZTo6Z2V0Q29uZmlnKCktPmdldE5vZGUoJ21vZHVsZXMnKS0+Y2hpbGRyZW4oKTsgcmV0dXJuIGlzc2V0KCRtb2R1bGVzWyRtb2R1bGVOYW1lXSk7IH0gcHVibGljIGZ1bmN0aW9uIGdldElzQW55bW9yZVZlcnNpb24oJG1ham9yLCAkbWlub3IsICRyZXZpc2lvbiA9IDApIHsgJHZlcnNpb25faW5mbyA9IE1hZ2U6OmdldFZlcnNpb25JbmZvKCk7IGlmICgkdmVyc2lvbl9pbmZvWydtYWpvciddID4gJG1ham9yKSB7IHJldHVybiB0cnVlOyB9IGVsc2VpZiAoJHZlcnNpb25faW5mb1snbWFqb3InXSA9PSAkbWFqb3IpIHsgaWYgKCR2ZXJzaW9uX2luZm9bJ21pbm9yJ10gPiAkbWlub3IpIHsgcmV0dXJuIHRydWU7IH0gZWxzZWlmICgkdmVyc2lvbl9pbmZvWydtaW5vciddID09ICRtaW5vcikgeyBpZiAoJHZlcnNpb25faW5mb1sncmV2aXNpb24nXSA+PSAkcmV2aXNpb24pIHsgcmV0dXJuIHRydWU7IH0gfSB9IHJldHVybiBmYWxzZTsgfSAvKiogKiBSZXR1cm4gYWxsb3dlZCBwcm9kdWN0IHR5cGVzICogKiBAcmV0dXJuIGFycmF5ICovIHB1YmxpYyBmdW5jdGlvbiBnZXRBbGxvd2VkUHJvZHVjdFR5cGVzKCkgeyByZXR1cm4gJHRoaXMtPl9hbGxvd2VkUHJvZHVjdFR5cGVzOyB9IHB1YmxpYyBmdW5jdGlvbiBoYXNDb2xvckF0dHJpYnV0ZSgpIHsgJGF0dHJpYnV0ZUNvZGUgPSBNYWdlOjpnZXRTdG9yZUNvbmZpZygnZ29tYWdlX2Rlc2lnbmVyL25hdmlnYXRpb24vY29sb3JfYXR0cmlidXRlJyk7ICRhdHRyaWJ1dGUgPSBNYWdlOjpnZXRTaW5nbGV0b24oJ2Vhdi9jb25maWcnKSAtPmdldEF0dHJpYnV0ZShNYWdlX0NhdGFsb2dfTW9kZWxfUHJvZHVjdDo6RU5USVRZLCAkYXR0cmlidXRlQ29kZSk7IHJldHVybiAkYXR0cmlidXRlLT5nZXRJZCgpOyB9IC8qKiAqIFJldHVybiBJbWFnZSBTZXR0aW5ncyAqICogQHBhcmFtIE1hZ2VfQ2F0YWxvZ19Nb2RlbF9Qcm9kdWN0ICRwcm9kdWN0IFByb2R1Y3QgKiBAcGFyYW0gaW50ICRpbWFnZUlkIEltYWdlIElkICogQHJldHVybiBib29sZWFufGFycmF5ICovIHB1YmxpYyBmdW5jdGlvbiBnZXRJbWFnZVNldHRpbmdzKE1hZ2VfQ2F0YWxvZ19Nb2RlbF9Qcm9kdWN0ICRwcm9kdWN0LCAkaW1hZ2VJZCkgeyAkc2V0dGluZ3MgPSAkdGhpcy0+Z2V0U2V0dGluZ3MoJHByb2R1Y3QpOyBpZiAoaXNzZXQoJHNldHRpbmdzWyRpbWFnZUlkXSkpIHsgcmV0dXJuICRzZXR0aW5nc1skaW1hZ2VJZF07IH0gcmV0dXJuIGZhbHNlOyB9IC8qKiAqIFJldHVybiBQcm9kdWN0IGltYWdlcyBzZXR0aW5ncyAqICogQHBhcmFtIE1hZ2VfQ2F0YWxvZ19Nb2RlbF9Qcm9kdWN0ICRwcm9kdWN0IFByb2R1Y3QgKiBAcmV0dXJuIGFycmF5ICovIHB1YmxpYyBmdW5jdGlvbiBnZXRTZXR0aW5ncyhNYWdlX0NhdGFsb2dfTW9kZWxfUHJvZHVjdCAkcHJvZHVjdCkgeyBpZiAoISR0aGlzLT5fcHJvZHVjdFNldHRpbmdzKSB7ICRzZXR0aW5ncyA9IGFycmF5KCk7ICRpbWFnZXMgPSAkcHJvZHVjdC0+Z2V0TWVkaWFHYWxsZXJ5SW1hZ2VzKCk7IGZvcmVhY2ggKCRpbWFnZXMgYXMgJGltYWdlKSB7IGlmICgkaW1hZ2VbJ2Rlc2lnbl9hcmVhJ10pIHsgJGRlc2lnbkFyZWEgPSBNYWdlOjpoZWxwZXIoJ2NvcmUnKS0+anNvbkRlY29kZSgkaW1hZ2VbJ2Rlc2lnbl9hcmVhJ10pOyB9ICRpbWFnZUlkID0gJGltYWdlWyd2YWx1ZV9pZCddOyBpZiAoaXNzZXQoJGRlc2lnbkFyZWEpICYmICRkZXNpZ25BcmVhICYmICFlbXB0eSgkZGVzaWduQXJlYSkpIHsgJGltYWdlVXJsID0gJHRoaXMtPmdldERlc2lnbkltYWdlVXJsKCRwcm9kdWN0LCAkaW1hZ2UpOyAkZGltZW5zaW9ucyA9ICR0aGlzLT5nZXRJbWFnZURpbWVuc2lvbnMoJGltYWdlVXJsKTsgJGJhc2VVcmwgPSBNYWdlOjpnZXRCYXNlVXJsKCdtZWRpYScpOyAkYmFzZURpciA9IE1hZ2U6OmdldEJhc2VEaXIoJ21lZGlhJykgLiBEUzsgJGRlc2lnbkFyZWFbJ3BhdGgnXSA9IHN0cl9yZXBsYWNlKCRiYXNlVXJsLCAkYmFzZURpciwgJGltYWdlVXJsKTsgJGRlc2lnbkFyZWFbJ2RpbWVuc2lvbnMnXSA9IGFycmF5KCAnd2lkdGgnID0+ICRkaW1lbnNpb25zWzBdLCAnaGVpZ2h0JyA9PiAkZGltZW5zaW9uc1sxXSApOyAkZGVzaWduQXJlYVsnb3JpZ2luYWxfaW1hZ2UnXSA9ICR0aGlzLT5nZXRPcmlnaW5hbEltYWdlKCRwcm9kdWN0LCAkaW1hZ2UpOyBpZiAoaXNzZXQoJGRlc2lnbkFyZWFbJ29yaWdpbmFsX2ltYWdlJ11bJ3VybCddKSkgeyAkZGVzaWduQXJlYVsnb3JpZ2luYWxfaW1hZ2UnXVsncGF0aCddID0gc3RyX3JlcGxhY2UoICRiYXNlVXJsLCAkYmFzZURpciwgJGRlc2lnbkFyZWFbJ29yaWdpbmFsX2ltYWdlJ11bJ3VybCddICk7IH0gJHNldHRpbmdzWyRpbWFnZUlkXSA9ICRkZXNpZ25BcmVhOyB9IH0gJHRoaXMtPl9wcm9kdWN0U2V0dGluZ3MgPSAkc2V0dGluZ3M7IH0gcmV0dXJuICR0aGlzLT5fcHJvZHVjdFNldHRpbmdzOyB9IHB1YmxpYyBmdW5jdGlvbiBqc29uRGVjb2RlKCRzdHJpbmcpIHsgJHJlc3VsdCA9IGFycmF5KCk7IGlmICgkc3RyaW5nKSB7ICRzZXR0aW5ncyA9IE1hZ2U6OmhlbHBlcignY29yZScpLT5qc29uRGVjb2RlKCRzdHJpbmcpOyBmb3JlYWNoICgkc2V0dGluZ3MgYXMgJGkgPT4gJHYpIHsgJHJlc3VsdFskaV0gPSAoYXJyYXkpJHY7IGlmICghaXNzZXQoJHJlc3VsdFskaV1bJ3MnXSkpIHsgJHJlc3VsdFskaV1bJ3MnXSA9IDE7IH0gfSB9IHJldHVybiAkcmVzdWx0OyB9IHB1YmxpYyBmdW5jdGlvbiBnZXRJbWFnZURpbWVuc2lvbnMoJGltYWdlUGF0aCkgeyAkZGlySW1nID0gTWFnZTo6Z2V0QmFzZURpcigpIC4gc3RyX3JlcGxhY2UoIi8iLCBEUywgc3Ryc3RyKCRpbWFnZVBhdGgsICcvbWVkaWEnKSk7IGlmIChmaWxlX2V4aXN0cygkZGlySW1nKSkgeyAkaW1hZ2VPYmogPSBuZXcgVmFyaWVuX0ltYWdlKCRkaXJJbWcpOyAkd2lkdGggPSAkaW1hZ2VPYmotPmdldE9yaWdpbmFsV2lkdGgoKTsgJGhlaWdodCA9ICRpbWFnZU9iai0+Z2V0T3JpZ2luYWxIZWlnaHQoKTsgcmV0dXJuIGFycmF5KCR3aWR0aCwgJGhlaWdodCk7IH0gcmV0dXJuIGFycmF5KDAsIDApOyB9IHB1YmxpYyBmdW5jdGlvbiBwcmVwYXJlRGVzaWduZXJTZXNzaW9uSWQoKSB7ICRjdXN0b21lclNlc3Npb24gPSAkdGhpcy0+X2dldEN1c3RvbWVyU2Vzc2lvbigpOyBpZiAoISRjdXN0b21lclNlc3Npb24tPmdldERlc2lnbmVyU2Vzc2lvbklkKCkpIHsgJGN1c3RvbWVyU2Vzc2lvbi0+c2V0RGVzaWduZXJTZXNzaW9uSWQoc2hhMShyYW5kKDAsIDEwMDApIC4gbWljcm90aW1lKHRydWUpKSk7IH0gfSBwdWJsaWMgZnVuY3Rpb24gZ2V0RGVzaWduZXJTZXNzaW9uSWQoKSB7ICRzZXNzaW9uSWQgPSAkdGhpcy0+X2dldEN1c3RvbWVyU2Vzc2lvbigpLT5nZXRFbmNyeXB0ZWRTZXNzaW9uSWQoKTsgcmV0dXJuICRzZXNzaW9uSWQ7IH0gcHJvdGVjdGVkIGZ1bmN0aW9uIF9nZXRDdXN0b21lclNlc3Npb24oKSB7IHJldHVybiBNYWdlOjpnZXRTaW5nbGV0b24oJ2N1c3RvbWVyL3Nlc3Npb24nKTsgfSBwdWJsaWMgZnVuY3Rpb24gZ2V0RGVzaWduV2lkdGgoKSB7IHJldHVybiBHb01hZ2VfUHJvZHVjdERlc2lnbmVyX01vZGVsX0Rlc2lnbjo6REVTSUdOX1NJWkVfV0lEVEg7IH0gcHVibGljIGZ1bmN0aW9uIGdldERlc2lnbkhlaWdodCgpIHsgcmV0dXJuIEdvTWFnZV9Qcm9kdWN0RGVzaWduZXJfTW9kZWxfRGVzaWduOjpERVNJR05fU0laRV9IRUlHSFQ7IH0gLyoqICogUmV0dXJuIEltYWdlIFVybCAqICogQHBhcmFtIE1hZ2VfQ2F0YWxvZ19Nb2RlbF9Qcm9kdWN0ICRwcm9kdWN0IFByb2R1Y3QgKiBAcGFyYW0gVmFyaWVuX09iamVjdCAkaW1hZ2UgSW1hZ2UgKiBAcGFyYW0gYXJyYXkgJHNpemUgU2l6ZSAqIEByZXR1cm4gc3RyaW5nICovIHB1YmxpYyBmdW5jdGlvbiBnZXREZXNpZ25JbWFnZVVybChNYWdlX0NhdGFsb2dfTW9kZWxfUHJvZHVjdCAkcHJvZHVjdCwgJGltYWdlLCAkc2l6ZSA9IGFycmF5KCkpIHsgaWYgKGVtcHR5KCRzaXplKSkgeyAkaW1hZ2VXaWR0aCA9ICR0aGlzLT5nZXREZXNpZ25XaWR0aCgpOyAkaW1hZ2VIZWlnaHQgPSAkdGhpcy0+Z2V0RGVzaWduSGVpZ2h0KCk7IH0gZWxzZSB7IGxpc3QoJGltYWdlV2lkdGgsICRpbWFnZUhlaWdodCkgPSAkc2l6ZTsgfSAkaW1hZ2VGaWxlID0gaXNfb2JqZWN0KCRpbWFnZSkgPyAkaW1hZ2UtPmdldEZpbGUoKSA6ICRpbWFnZVsnZmlsZSddOyByZXR1cm4gTWFnZTo6aGVscGVyKCdjYXRhbG9nL2ltYWdlJykgLT5pbml0KCRwcm9kdWN0LCAnYmFzZV9pbWFnZScsICRpbWFnZUZpbGUpIC0+a2VlcEZyYW1lKGZhbHNlKSAtPnJlc2l6ZSgkaW1hZ2VXaWR0aCwgJGltYWdlSGVpZ2h0KSAtPl9fdG9TdHJpbmcoKTsgfSBwdWJsaWMgZnVuY3Rpb24gZ2V0T3JpZ2luYWxJbWFnZShNYWdlX0NhdGFsb2dfTW9kZWxfUHJvZHVjdCAkcHJvZHVjdCwgJGltYWdlKSB7ICRpbWFnZUZpbGUgPSBpc19vYmplY3QoJGltYWdlKSA/ICRpbWFnZS0+Z2V0RmlsZSgpIDogJGltYWdlWydmaWxlJ107ICRpbWFnZVBhdGggPSAkcHJvZHVjdC0+Z2V0TWVkaWFDb25maWcoKS0+Z2V0TWVkaWFQYXRoKCRpbWFnZUZpbGUpOyAkbWluV2lkdGggPSBNYWdlOjpnZXRTdG9yZUNvbmZpZygnZ29tYWdlX2Rlc2lnbmVyL2dlbmVyYWwvem9vbV9zaXplX3dpZHRoJyk7ICRtaW5IZWlnaHQgPSBNYWdlOjpnZXRTdG9yZUNvbmZpZygnZ29tYWdlX2Rlc2lnbmVyL2dlbmVyYWwvem9vbV9zaXplX2hlaWdodCcpOyBpZiAoZmlsZV9leGlzdHMoJGltYWdlUGF0aCkpIHsgJGltYWdlT2JqID0gbmV3IFZhcmllbl9JbWFnZSgkaW1hZ2VQYXRoKTsgJHdpZHRoID0gJGltYWdlT2JqLT5nZXRPcmlnaW5hbFdpZHRoKCk7ICRoZWlnaHQgPSAkaW1hZ2VPYmotPmdldE9yaWdpbmFsSGVpZ2h0KCk7ICRkaW1lbnNpb25zID0gYXJyYXkoKTsgaWYgKCR3aWR0aCA8ICRtaW5XaWR0aCAmJiAkaGVpZ2h0IDwgJG1pbkhlaWdodCkgeyAkZGltZW5zaW9uc1swXSA9ICRtaW5XaWR0aDsgJGRpbWVuc2lvbnNbMV0gPSAkbWluSGVpZ2h0OyB9IGVsc2UgeyAkZGltZW5zaW9uc1swXSA9ICR3aWR0aDsgJGRpbWVuc2lvbnNbMV0gPSAkaGVpZ2h0OyB9IHJldHVybiBhcnJheSggJ3VybCcgPT4gJHRoaXMtPmdldERlc2lnbkltYWdlVXJsKCRwcm9kdWN0LCAkaW1hZ2UsICRkaW1lbnNpb25zKSwgJ2RpbWVuc2lvbnMnID0+ICRkaW1lbnNpb25zICk7IH0gcmV0dXJuIGFycmF5KCk7IH0gcHVibGljIGZ1bmN0aW9uIGdldFByb2R1Y3RTZXR0aW5nRm9yRWRpdG9yKE1hZ2VfQ2F0YWxvZ19Nb2RlbF9Qcm9kdWN0ICRwcm9kdWN0ID0gbnVsbCkgeyBpZiAoISR0aGlzLT5fZWRpdG9yQ29uZmlnKSB7IGlmIChpc19udWxsKCRwcm9kdWN0KSkgeyAkcHJvZHVjdCA9IE1hZ2U6OnJlZ2lzdHJ5KCdwcm9kdWN0Jyk7IH0gJGVkaXRvckNvbmZpZyA9IGFycmF5KCAnaW1hZ2VzJyA9PiBhcnJheSgpICk7IGlmICghJHByb2R1Y3QtPmdldElkKCkpIHsgcmV0dXJuICRlZGl0b3JDb25maWc7IH0gJGltYWdlcyA9ICRwcm9kdWN0LT5nZXRNZWRpYUdhbGxlcnlJbWFnZXMoKTsgJGNvbG9yQXR0cmlidXRlQ29kZSA9IE1hZ2U6OmdldFN0b3JlQ29uZmlnKCdnb21hZ2VfZGVzaWduZXIvbmF2aWdhdGlvbi9jb2xvcl9hdHRyaWJ1dGUnKTsgJGRlZmF1bHRDb2xvciA9IG51bGw7IGZvcmVhY2ggKCRpbWFnZXMgYXMgJGltYWdlKSB7ICRpZCA9ICRpbWFnZVsndmFsdWVfaWQnXTsgaWYgKCRpbWFnZVsnZGVzaWduX2FyZWEnXSkgeyAkc2V0dGluZ3MgPSBNYWdlOjpoZWxwZXIoJ2NvcmUnKS0+anNvbkRlY29kZSgkaW1hZ2VbJ2Rlc2lnbl9hcmVhJ10pOyB9IGlmICghaXNzZXQoJHNldHRpbmdzKSB8fCAhJHNldHRpbmdzIHx8IGVtcHR5KCRzZXR0aW5ncykpIHsgY29udGludWU7IH0gJGltYWdlVXJsID0gJHRoaXMtPmdldERlc2lnbkltYWdlVXJsKCRwcm9kdWN0LCAkaW1hZ2UpOyAkY29uZiA9ICRzZXR0aW5nczsgJGNvbmZbJ2lkJ10gPSAkaWQ7ICRjb25mWyd1J10gPSAkaW1hZ2VVcmw7ICRjb25mWydkJ10gPSAkdGhpcy0+Z2V0SW1hZ2VEaW1lbnNpb25zKCRpbWFnZVVybCk7ICRjb25mWydvcmlnX2ltYWdlJ10gPSAkdGhpcy0+Z2V0T3JpZ2luYWxJbWFnZSgkcHJvZHVjdCwgJGltYWdlKTsgJGNvbmZbJ2ljbyddID0gJHRoaXMtPmdldERlc2lnbkltYWdlVXJsKCRwcm9kdWN0LCAkaW1hZ2UsIGFycmF5KDYwLCA2MCkpOyBpZiAoJHByb2R1Y3QtPmdldFR5cGVJZCgpID09IE1hZ2VfQ2F0YWxvZ19Nb2RlbF9Qcm9kdWN0X1R5cGU6OlRZUEVfQ09ORklHVVJBQkxFKSB7IGlmICgkaW1hZ2VbJ2NvbG9yJ10pIHsgaWYgKGlzX251bGwoJGRlZmF1bHRDb2xvcikpIHsgJGRlZmF1bHRDb2xvciA9ICRpbWFnZVsnY29sb3InXTsgfSBpZiAoIWlzc2V0KCRlZGl0b3JDb25maWdbJ2ltYWdlcyddWyRpbWFnZVsnY29sb3InXV0pKSB7ICRlZGl0b3JDb25maWdbJ2ltYWdlcyddWyRpbWFnZVsnY29sb3InXV0gPSBhcnJheSgpOyB9ICRlZGl0b3JDb25maWdbJ2ltYWdlcyddWyRpbWFnZVsnY29sb3InXV1bJGlkXSA9ICRjb25mOyB9IGVsc2UgeyAkZGVmYXVsdENvbG9yID0gJHByb2R1Y3QtPmdldERhdGEoJGNvbG9yQXR0cmlidXRlQ29kZSkgPzogJ25vbmVfY29sb3InOyAkZWRpdG9yQ29uZmlnWydpbWFnZXMnXVskZGVmYXVsdENvbG9yXVskaWRdID0gJGNvbmY7IH0gfSBlbHNlIHsgJGRlZmF1bHRDb2xvciA9ICdub25lX2NvbG9yJzsgJGVkaXRvckNvbmZpZ1snaW1hZ2VzJ11bJGRlZmF1bHRDb2xvcl1bJGlkXSA9ICRjb25mOyB9ICRlZGl0b3JDb25maWdbJ2RlZmF1bHRfY29sb3InXSA9ICRkZWZhdWx0Q29sb3I7ICRlZGl0b3JDb25maWdbJ3VybCddID0gJHByb2R1Y3QtPmdldFByb2R1Y3RVcmwoKTsgJGVkaXRvckNvbmZpZ1snbmFtZSddID0gJHByb2R1Y3QtPmdldE5hbWUoKTsgfSAkdGhpcy0+X2VkaXRvckNvbmZpZyA9ICRlZGl0b3JDb25maWc7IH0gcmV0dXJuICR0aGlzLT5fZWRpdG9yQ29uZmlnOyB9IC8qKiAqIFNhdmUgcHJvZHVjdCBkZXNpZ24gaW1hZ2VzICogKiBAcmV0dXJuIEdvTWFnZV9Qcm9kdWN0RGVzaWduZXJfTW9kZWxfRGVzaWduICogQHRocm93cyBFeGNlcHRpb24gKi8gcHVibGljIGZ1bmN0aW9uIHNhdmVQcm9kdWN0RGVzaWduZWRJbWFnZXMoKSB7ICRwcm9kdWN0ID0gJHRoaXMtPmluaXRpYWxpemVQcm9kdWN0KCk7ICRpbWFnZXMgPSBNYWdlOjphcHAoKS0+Z2V0UmVxdWVzdCgpLT5nZXRQYXJhbSgnaW1hZ2VzJyk7IGlmICgkcHJvZHVjdC0+Z2V0SWQoKSAmJiAkaW1hZ2VzICYmICFlbXB0eSgkaW1hZ2VzKSkgeyAkZGVzaWduID0gTWFnZTo6Z2V0TW9kZWwoJ2dvbWFnZV9kZXNpZ25lci9kZXNpZ24nKS0+c2F2ZURlc2lnbigkcHJvZHVjdCwgJHRoaXMtPl9nZXRSZXF1ZXN0KCktPmdldFBhcmFtcygpKTsgcmV0dXJuICRkZXNpZ247IH0gZWxzZWlmICghJHByb2R1Y3QtPmdldElkKCkpIHsgdGhyb3cgbmV3IEV4Y2VwdGlvbihNYWdlOjpoZWxwZXIoJ2dvbWFnZV9kZXNpZ25lcicpLT5fXygnUHJvZHVjdCBpcyBub3QgZGVmaW5lZCcpKTsgfSBlbHNlaWYgKCEkaW1hZ2VzIHx8IGVtcHR5KCRpbWFnZXMpKSB7IHRocm93IG5ldyBFeGNlcHRpb24oTWFnZTo6aGVscGVyKCdnb21hZ2VfZGVzaWduZXInKS0+X18oJ0Rlc2lnbmVkIGltYWdlcyBhcmUgZW1wdHknKSk7IH0gfSAvKiogKiBJbml0aWFsaXplIGN1cnJlbnQgcHJvZHVjdCBmcm9tIHJlcXVlc3QgKiAqIEByZXR1cm4gTWFnZV9DYXRhbG9nX01vZGVsX1Byb2R1Y3QgKi8gcHVibGljIGZ1bmN0aW9uIGluaXRpYWxpemVQcm9kdWN0KCkgeyAkcHJvZHVjdCA9IE1hZ2U6OnJlZ2lzdHJ5KCdwcm9kdWN0Jyk7IGlmICgkcHJvZHVjdCkgeyByZXR1cm4gJHByb2R1Y3Q7IH0gJHJlcXVlc3QgPSBNYWdlOjphcHAoKS0+Z2V0UmVxdWVzdCgpOyAkcHJvZHVjdElkID0gJHJlcXVlc3QtPmdldFBhcmFtKCJpZCIsIGZhbHNlKTsgJHByb2R1Y3QgPSBNYWdlOjpnZXRNb2RlbCgnY2F0YWxvZy9wcm9kdWN0Jyk7IGlmICgkcHJvZHVjdElkKSB7ICRwcm9kdWN0LT5sb2FkKCRwcm9kdWN0SWQpOyB9IE1hZ2U6OnJlZ2lzdGVyKCdwcm9kdWN0JywgJHByb2R1Y3QpOyByZXR1cm4gJHByb2R1Y3Q7IH0gLyoqICogUHJpY2UgY2FsY3VsYXRpb24gZGVwZW5kaW5nIG9uIHByb2R1Y3Qgb3B0aW9ucyAqICogQHJldHVybiBhcnJheSAqLyBwdWJsaWMgZnVuY3Rpb24gZ2V0UHJvZHVjdFByaWNlQ29uZmlnKCkgeyAkY29uZmlnID0gYXJyYXkoKTsgJF9yZXF1ZXN0ID0gTWFnZTo6Z2V0U2luZ2xldG9uKCd0YXgvY2FsY3VsYXRpb24nKS0+Z2V0UmF0ZVJlcXVlc3QoZmFsc2UsIGZhbHNlLCBmYWxzZSk7IC8qIEB2YXIgJHByb2R1Y3QgTWFnZV9DYXRhbG9nX01vZGVsX1Byb2R1Y3QgKi8gJHByb2R1Y3QgPSAkdGhpcy0+aW5pdGlhbGl6ZVByb2R1Y3QoKTsgJF9yZXF1ZXN0LT5zZXRQcm9kdWN0Q2xhc3NJZCgkcHJvZHVjdC0+Z2V0VGF4Q2xhc3NJZCgpKTsgJGRlZmF1bHRUYXggPSBNYWdlOjpnZXRTaW5nbGV0b24oJ3RheC9jYWxjdWxhdGlvbicpLT5nZXRSYXRlKCRfcmVxdWVzdCk7ICRfcmVxdWVzdCA9IE1hZ2U6OmdldFNpbmdsZXRvbigndGF4L2NhbGN1bGF0aW9uJyktPmdldFJhdGVSZXF1ZXN0KCk7ICRfcmVxdWVzdC0+c2V0UHJvZHVjdENsYXNzSWQoJHByb2R1Y3QtPmdldFRheENsYXNzSWQoKSk7ICRjdXJyZW50VGF4ID0gTWFnZTo6Z2V0U2luZ2xldG9uKCd0YXgvY2FsY3VsYXRpb24nKS0+Z2V0UmF0ZSgkX3JlcXVlc3QpOyAkX3JlZ3VsYXJQcmljZSA9ICRwcm9kdWN0LT5nZXRQcmljZSgpOyAkX2ZpbmFsUHJpY2UgPSAkcHJvZHVjdC0+Z2V0RmluYWxQcmljZSgpOyAkX3ByaWNlSW5jbFRheCA9IE1hZ2U6OmhlbHBlcigndGF4JyktPmdldFByaWNlKCRwcm9kdWN0LCAkX2ZpbmFsUHJpY2UsIHRydWUpOyAkX3ByaWNlRXhjbFRheCA9IE1hZ2U6OmhlbHBlcigndGF4JyktPmdldFByaWNlKCRwcm9kdWN0LCAkX2ZpbmFsUHJpY2UpOyAkX3RpZXJQcmljZXMgPSBhcnJheSgpOyAkX3RpZXJQcmljZXNJbmNsVGF4ID0gYXJyYXkoKTsgZm9yZWFjaCAoJHByb2R1Y3QtPmdldFRpZXJQcmljZSgpIGFzICR0aWVyUHJpY2UpIHsgJF90aWVyUHJpY2VzW10gPSBNYWdlOjpoZWxwZXIoJ2NvcmUnKS0+Y3VycmVuY3koJHRpZXJQcmljZVsnd2Vic2l0ZV9wcmljZSddLCBmYWxzZSwgZmFsc2UpOyAkX3RpZXJQcmljZXNJbmNsVGF4W10gPSBNYWdlOjpoZWxwZXIoJ2NvcmUnKS0+Y3VycmVuY3koIE1hZ2U6OmhlbHBlcigndGF4JyktPmdldFByaWNlKCRwcm9kdWN0LCAoaW50KSR0aWVyUHJpY2VbJ3dlYnNpdGVfcHJpY2UnXSwgdHJ1ZSksIGZhbHNlLCBmYWxzZSApOyB9ICRjb25maWcgPSBhcnJheSggJ3Byb2R1Y3RJZCcgPT4gJHByb2R1Y3QtPmdldElkKCksICdwcmljZUZvcm1hdCcgPT4gTWFnZTo6YXBwKCktPmdldExvY2FsZSgpLT5nZXRKc1ByaWNlRm9ybWF0KCksICdpbmNsdWRlVGF4JyA9PiBNYWdlOjpoZWxwZXIoJ3RheCcpLT5wcmljZUluY2x1ZGVzVGF4KCkgPyAndHJ1ZScgOiAnZmFsc2UnLCAnc2hvd0luY2x1ZGVUYXgnID0+IE1hZ2U6OmhlbHBlcigndGF4JyktPmRpc3BsYXlQcmljZUluY2x1ZGluZ1RheCgpLCAnc2hvd0JvdGhQcmljZXMnID0+IE1hZ2U6OmhlbHBlcigndGF4JyktPmRpc3BsYXlCb3RoUHJpY2VzKCksICdwcm9kdWN0UHJpY2UnID0+IE1hZ2U6OmhlbHBlcignY29yZScpLT5jdXJyZW5jeSgkX2ZpbmFsUHJpY2UsIGZhbHNlLCBmYWxzZSksICdwcm9kdWN0T2xkUHJpY2UnID0+IE1hZ2U6OmhlbHBlcignY29yZScpLT5jdXJyZW5jeSgkX3JlZ3VsYXJQcmljZSwgZmFsc2UsIGZhbHNlKSwgJ3ByaWNlSW5jbFRheCcgPT4gTWFnZTo6aGVscGVyKCdjb3JlJyktPmN1cnJlbmN5KCRfcHJpY2VJbmNsVGF4LCBmYWxzZSwgZmFsc2UpLCAncHJpY2VFeGNsVGF4JyA9PiBNYWdlOjpoZWxwZXIoJ2NvcmUnKS0+Y3VycmVuY3koJF9wcmljZUV4Y2xUYXgsIGZhbHNlLCBmYWxzZSksIC8qKiAqIEB2YXIgc2tpcENhbGN1bGF0ZSAqIEBkZXByZWNhdGVkIGFmdGVyIDEuNS4xLjAgKi8gJ3NraXBDYWxjdWxhdGUnID0+ICgkX3ByaWNlRXhjbFRheCAhPSAkX3ByaWNlSW5jbFRheCA/IDAgOiAxKSwgJ2RlZmF1bHRUYXgnID0+ICRkZWZhdWx0VGF4LCAnY3VycmVudFRheCcgPT4gJGN1cnJlbnRUYXgsICdpZFN1ZmZpeCcgPT4gJ19jbG9uZScsICdvbGRQbHVzRGlzcG9zaXRpb24nID0+IDAsICdwbHVzRGlzcG9zaXRpb24nID0+IDAsICdwbHVzRGlzcG9zaXRpb25UYXgnID0+IDAsICdvbGRNaW51c0Rpc3Bvc2l0aW9uJyA9PiAwLCAnbWludXNEaXNwb3NpdGlvbicgPT4gMCwgJ3RpZXJQcmljZXMnID0+ICRfdGllclByaWNlcywgJ3RpZXJQcmljZXNJbmNsVGF4JyA9PiAkX3RpZXJQcmljZXNJbmNsVGF4LCApOyAkcmVzcG9uc2VPYmplY3QgPSBuZXcgVmFyaWVuX09iamVjdCgpOyBNYWdlOjpkaXNwYXRjaEV2ZW50KCdjYXRhbG9nX3Byb2R1Y3Rfdmlld19jb25maWcnLCBhcnJheSgncmVzcG9uc2Vfb2JqZWN0JyA9PiAkcmVzcG9uc2VPYmplY3QpKTsgaWYgKGlzX2FycmF5KCRyZXNwb25zZU9iamVjdC0+Z2V0QWRkaXRpb25hbE9wdGlvbnMoKSkpIHsgZm9yZWFjaCAoJHJlc3BvbnNlT2JqZWN0LT5nZXRBZGRpdGlvbmFsT3B0aW9ucygpIGFzICRvcHRpb24gPT4gJHZhbHVlKSB7ICRjb25maWdbJG9wdGlvbl0gPSAkdmFsdWU7IH0gfSByZXR1cm4gJGNvbmZpZzsgfSBwdWJsaWMgZnVuY3Rpb24gZm9ybWF0RmlsZU5hbWUoJGZpbGUpIHsgJGZvcm1hdFJlc3VsdCA9IE1hZ2U6OmhlbHBlcignY2F0YWxvZy9wcm9kdWN0X3VybCcpLT5mb3JtYXQoJGZpbGUpOyByZXR1cm4gcHJlZ19yZXBsYWNlKCcjW1xzXSsjaScsICctJywgJGZvcm1hdFJlc3VsdCk7IH0gcHVibGljIGZ1bmN0aW9uIGNhbkFwcGx5TXNycCgkcHJvZHVjdCwgJHZpc2liaWxpdHkgPSBudWxsLCAkY2hlY2tBc3NvY2lhdGVkSXRlbXMgPSB0cnVlKSB7ICR2ZXJzaW9uID0gTWFnZTo6Z2V0VmVyc2lvbkluZm8oKTsgaWYgKCgkdmVyc2lvblsnbWFqb3InXSA9PT0gJzEnKSAmJiAoKGludCkkdmVyc2lvblsnbWlub3InXSA8PSA1KSkgeyByZXR1cm4gZmFsc2U7IH0gZWxzZWlmIChtZXRob2RfZXhpc3RzKE1hZ2U6OmhlbHBlcignY2F0YWxvZycpLCAnY2FuQXBwbHlNc3JwJykpIHsgcmV0dXJuIE1hZ2U6OmhlbHBlcignY2F0YWxvZycpLT5jYW5BcHBseU1zcnAoJHByb2R1Y3QsICR2aXNpYmlsaXR5LCAkY2hlY2tBc3NvY2lhdGVkSXRlbXMpOyB9IHJldHVybiBmYWxzZTsgfSAvKiogKiBSZXRyaWV2ZSB1cmwgZm9yIGFkZGluZyBwcm9kdWN0IHRvIHdpc2hsaXN0ICogKiBAcGFyYW0gaW50ICRpdGVtSWQgKiAqIEByZXR1cm4gc3RyaW5nICovIHB1YmxpYyBmdW5jdGlvbiBnZXRNb3ZlRnJvbUNhcnRVcmwoJGl0ZW1JZCkgeyAkdmVyc2lvbiA9IE1hZ2U6OmdldFZlcnNpb25JbmZvKCk7IGlmICgoJHZlcnNpb25bJ21ham9yJ10gPT09ICcxJykgJiYgKChpbnQpJHZlcnNpb25bJ21pbm9yJ10gPD0gNSkpIHsgcmV0dXJuIGZhbHNlOyB9IGVsc2UgeyBpZiAobWV0aG9kX2V4aXN0cyhNYWdlOjpoZWxwZXIoJ3dpc2hsaXN0JyksICdnZXRNb3ZlRnJvbUNhcnRVcmwnKSkgeyByZXR1cm4gTWFnZTo6aGVscGVyKCd3aXNobGlzdCcpLT5nZXRNb3ZlRnJvbUNhcnRVcmwoJGl0ZW1JZCk7IH0gfSByZXR1cm4gZmFsc2U7IH0gLyoqICogR2V0IEpTT04gZW5jb2RlZCBjb25maWd1cmF0aW9uIGFycmF5IHdoaWNoIGNhbiBiZSB1c2VkIGZvciBKUyBkeW5hbWljICogKiBAcmV0dXJuIHN0cmluZyAqLyBwdWJsaWMgZnVuY3Rpb24gZ2V0UHJvZHVjdFByaWNlQ29uZmlnSnNvbigpIHsgcmV0dXJuIE1hZ2U6OmhlbHBlcignY29yZScpLT5qc29uRW5jb2RlKCR0aGlzLT5nZXRQcm9kdWN0UHJpY2VDb25maWcoKSk7IH0gLyoqICogUmV0dXJuIHByb2R1Y3QgZGVzaWduIGZyb20gcmVxdWVzdCAqICogQHBhcmFtIE1hZ2VfQ2F0YWxvZ19Nb2RlbF9Qcm9kdWN0ICRwcm9kdWN0IFByb2R1Y3QgKiBAcmV0dXJuIGJvb2x8TWFnZV9Db3JlX01vZGVsX0Fic3RyYWN0ICovIHB1YmxpYyBmdW5jdGlvbiBnZXRQcm9kdWN0RGVzaWduKCRwcm9kdWN0KSB7IGlmIChpc19udWxsKCR0aGlzLT5fcHJvZHVjdERlc2lnbikpIHsgJGRlc2lnbklkID0gKGludClNYWdlOjphcHAoKS0+Z2V0UmVxdWVzdCgpLT5nZXRQYXJhbSgnZGVzaWduX2lkJywgZmFsc2UpOyBpZiAoJGRlc2lnbklkKSB7ICRkZXNpZ24gPSBNYWdlOjpnZXRNb2RlbCgnZ29tYWdlX2Rlc2lnbmVyL2Rlc2lnbicpLT5sb2FkKCRkZXNpZ25JZCk7IGlmICgkZGVzaWduLT5nZXRJZCgpICYmICRkZXNpZ24tPmdldFByb2R1Y3RJZCgpID09ICRwcm9kdWN0LT5nZXRJZCgpKSB7ICR0aGlzLT5fcHJvZHVjdERlc2lnbiA9ICRkZXNpZ247IH0gZWxzZSB7ICR0aGlzLT5fcHJvZHVjdERlc2lnbiA9IGZhbHNlOyB9IH0gfSByZXR1cm4gJHRoaXMtPl9wcm9kdWN0RGVzaWduOyB9IHB1YmxpYyBmdW5jdGlvbiBnZXRBbGxTdG9yZURvbWFpbnMoKSB7ICRkb21haW5zID0gYXJyYXkoKTsgZm9yZWFjaCAoTWFnZTo6YXBwKCktPmdldFdlYnNpdGVzKCkgYXMgJHdlYnNpdGUpIHsgJHVybCA9ICR3ZWJzaXRlLT5nZXRDb25maWcoJ3dlYi91bnNlY3VyZS9iYXNlX3VybCcpOyBpZiAoJGRvbWFpbiA9IHRyaW0ocHJlZ19yZXBsYWNlKCcvXi4qP1xcL1xcLyguKik/XFwvLycsICckMScsICR1cmwpKSkgeyAkZG9tYWluc1tdID0gJGRvbWFpbjsgfSAkdXJsID0gJHdlYnNpdGUtPmdldENvbmZpZygnd2ViL3NlY3VyZS9iYXNlX3VybCcpOyBpZiAoJGRvbWFpbiA9IHRyaW0ocHJlZ19yZXBsYWNlKCcvXi4qP1xcL1xcLyguKik/XFwvLycsICckMScsICR1cmwpKSkgeyAkZG9tYWluc1tdID0gJGRvbWFpbjsgfSB9IHJldHVybiBhcnJheV91bmlxdWUoJGRvbWFpbnMpOyB9IHB1YmxpYyBmdW5jdGlvbiBnZXRXaW5kb3dDc3NQYXRoKCkgeyBpZiAoISR0aGlzLT5nZXRJc0FueW1vcmVWZXJzaW9uKDEsIDcpKSB7IHJldHVybiAncHJvdG90eXBlL3dpbmRvd3MvdGhlbWVzL21hZ2VudG8uY3NzJzsgfSBlbHNlIHsgcmV0dXJuICdsaWIvcHJvdG90eXBlL3dpbmRvd3MvdGhlbWVzL21hZ2VudG8uY3NzJzsgfSB9IHB1YmxpYyBmdW5jdGlvbiBnZXRDc3NUeXBlKCkgeyBpZiAoISR0aGlzLT5nZXRJc0FueW1vcmVWZXJzaW9uKDEsIDcpKSB7IHJldHVybiAnanNfY3NzJzsgfSBlbHNlIHsgcmV0dXJuICdza2luX2Nzcyc7IH0gfSBwdWJsaWMgZnVuY3Rpb24gZ2V0QXZhaWxhYmxlV2Vic2l0ZXMoKSB7IHJldHVybiAkdGhpcy0+X3coKTsgfSBwcm90ZWN0ZWQgZnVuY3Rpb24gX3coKSB7IGlmICghTWFnZTo6Z2V0U3RvcmVDb25maWcoJ2dvbWFnZV9hY3RpdmF0aW9uL2Rlc2lnbmVyL2luc3RhbGxlZCcpIHx8IChpbnR2YWwoTWFnZTo6Z2V0U3RvcmVDb25maWcoJ2dvbWFnZV9hY3RpdmF0aW9uL2Rlc2lnbmVyL2NvdW50JykpID4gMTApICkgeyByZXR1cm4gYXJyYXkoKTsgfSAkdGltZV90b191cGRhdGUgPSA2MCAqIDYwICogMjQgKiAxNTsgJHIgPSBNYWdlOjpnZXRTdG9yZUNvbmZpZygnZ29tYWdlX2FjdGl2YXRpb24vZGVzaWduZXIvYXInKTsgJHQgPSBNYWdlOjpnZXRTdG9yZUNvbmZpZygnZ29tYWdlX2FjdGl2YXRpb24vZGVzaWduZXIvdGltZScpOyAkcyA9IE1hZ2U6OmdldFN0b3JlQ29uZmlnKCdnb21hZ2VfYWN0aXZhdGlvbi9kZXNpZ25lci93ZWJzaXRlcycpOyAkbGFzdF9jaGVjayA9IHN0cl9yZXBsYWNlKCRyLCAnJywgTWFnZTo6aGVscGVyKCdjb3JlJyktPmRlY3J5cHQoJHQpKTsgJGFsbHNpdGVzID0gZXhwbG9kZSgnLCcsIHN0cl9yZXBsYWNlKCRyLCAnJywgTWFnZTo6aGVscGVyKCdjb3JlJyktPmRlY3J5cHQoJHMpKSk7ICRhbGxzaXRlcyA9IGFycmF5X2RpZmYoJGFsbHNpdGVzLCBhcnJheSgiIikpOyBpZiAoKCRsYXN0X2NoZWNrICsgJHRpbWVfdG9fdXBkYXRlKSA8IHRpbWUoKSkgeyAkdGhpcy0+YShNYWdlOjpnZXRTdG9yZUNvbmZpZygnZ29tYWdlX2FjdGl2YXRpb24vZGVzaWduZXIva2V5JyksIGludHZhbChNYWdlOjpnZXRTdG9yZUNvbmZpZygnZ29tYWdlX2FjdGl2YXRpb24vZGVzaWduZXIvY291bnQnKSksIGltcGxvZGUoJywnLCAkYWxsc2l0ZXMpICk7IH0gcmV0dXJuICRhbGxzaXRlczsgfSBwdWJsaWMgZnVuY3Rpb24gYSgkaywgJGMgPSAwLCAkcyA9ICcnKSB7ICRjaCA9IGN1cmxfaW5pdCgpOyBjdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfVVJMLCBzcHJpbnRmKCdodHRwczovL3d3dy5nb21hZ2UuY29tL2luZGV4LnBocC9nb21hZ2VfZG93bmxvYWRhYmxlL2tleS9jaGVjaycpKTsgY3VybF9zZXRvcHQoJGNoLCBDVVJMT1BUX1BPU1QsIHRydWUpOyBjdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfUE9TVEZJRUxEUywgJ2tleT0nIC4gdXJsZW5jb2RlKCRrKSAuICcmc2t1PXByb2R1Y3QtZGVzaWduZXImZG9tYWlucz0nIC4gdXJsZW5jb2RlKGltcGxvZGUoJywnLCAkdGhpcy0+Z2V0QWxsU3RvcmVEb21haW5zKCkpKSAuICcmdmVyPScgLiB1cmxlbmNvZGUoJzIuNi4wJykpOyBjdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfVElNRU9VVCwgMzApOyBjdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfUkVUVVJOVFJBTlNGRVIsIHRydWUpOyBjdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfU1NMX1ZFUklGWVBFRVIsIDApOyBjdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfU1NMX1ZFUklGWUhPU1QsIDApOyAkY29udGVudCA9IGN1cmxfZXhlYygkY2gpOyB0cnkgeyAkciA9IFplbmRfSnNvbjo6ZGVjb2RlKCRjb250ZW50KTsgfSBjYXRjaCAoXEV4Y2VwdGlvbiAkZSkgeyAkciA9IGFycmF5KCk7IH0gJGUgPSBNYWdlOjpoZWxwZXIoJ2NvcmUnKTsgaWYgKGVtcHR5KCRyKSkgeyAkdmFsdWUxID0gTWFnZTo6Z2V0U3RvcmVDb25maWcoJ2dvbWFnZV9hY3RpdmF0aW9uL2Rlc2lnbmVyL2FyJyk7ICRncm91cHMgPSBhcnJheSggJ2Rlc2lnbmVyJyA9PiBhcnJheSggJ2ZpZWxkcycgPT4gYXJyYXkoICdhcicgPT4gYXJyYXkoICd2YWx1ZScgPT4gJHZhbHVlMSApLCAnd2Vic2l0ZXMnID0+IGFycmF5KCAndmFsdWUnID0+IChzdHJpbmcpTWFnZTo6Z2V0U3RvcmVDb25maWcoJ2dvbWFnZV9hY3RpdmF0aW9uL2Rlc2lnbmVyL3dlYnNpdGVzJykgKSwgJ3RpbWUnID0+IGFycmF5KCAndmFsdWUnID0+IChzdHJpbmcpJGUtPmVuY3J5cHQoJHZhbHVlMSAuICh0aW1lKCkgLSAoNjAgKiA2MCAqIDI0ICogMTUgLSAxODAwKSkgLiAkdmFsdWUxKSApLCAnY291bnQnID0+IGFycmF5KCAndmFsdWUnID0+ICRjICsgMSkgKSApICk7IE1hZ2U6OmdldE1vZGVsKCdhZG1pbmh0bWwvY29uZmlnX2RhdGEnKSAtPnNldFNlY3Rpb24oJ2dvbWFnZV9hY3RpdmF0aW9uJykgLT5zZXRHcm91cHMoJGdyb3VwcykgLT5zYXZlKCk7IE1hZ2U6OmdldENvbmZpZygpLT5yZWluaXQoKTsgTWFnZTo6YXBwKCktPnJlaW5pdFN0b3JlcygpOyByZXR1cm47IH0gJHZhbHVlMSA9ICcnOyAkdmFsdWUyID0gJyc7IGlmIChpc3NldCgkclsnZCddKSAmJiBpc3NldCgkclsnYyddKSkgeyAkdmFsdWUxID0gJGUtPmVuY3J5cHQoYmFzZTY0X2VuY29kZShaZW5kX0pzb246OmVuY29kZSgkcikpKTsgaWYgKCEkcykgeyAkcyA9IE1hZ2U6OmdldFN0b3JlQ29uZmlnKCdnb21hZ2VfYWN0aXZhdGlvbi9kZXNpZ25lci93ZWJzaXRlcycpOyB9ICRzID0gYXJyYXlfc2xpY2UoZXhwbG9kZSgnLCcsICRzKSwgMCwgJHJbJ2MnXSk7ICR2YWx1ZTIgPSAkZS0+ZW5jcnlwdCgkdmFsdWUxIC4gaW1wbG9kZSgnLCcsICRzKSAuICR2YWx1ZTEpOyB9ICRncm91cHMgPSBhcnJheSggJ2Rlc2lnbmVyJyA9PiBhcnJheSggJ2ZpZWxkcycgPT4gYXJyYXkoICdhcicgPT4gYXJyYXkoICd2YWx1ZScgPT4gJHZhbHVlMSApLCAnd2Vic2l0ZXMnID0+IGFycmF5KCAndmFsdWUnID0+IChzdHJpbmcpJHZhbHVlMiApLCAndGltZScgPT4gYXJyYXkoICd2YWx1ZScgPT4gKHN0cmluZykkZS0+ZW5jcnlwdCgkdmFsdWUxIC4gdGltZSgpIC4gJHZhbHVlMSkgKSwgJ2luc3RhbGxlZCcgPT4gYXJyYXkoICd2YWx1ZScgPT4gMSApLCAnY291bnQnID0+IGFycmF5KCAndmFsdWUnID0+IDApICkgKSApOyBNYWdlOjpnZXRNb2RlbCgnYWRtaW5odG1sL2NvbmZpZ19kYXRhJykgLT5zZXRTZWN0aW9uKCdnb21hZ2VfYWN0aXZhdGlvbicpIC0+c2V0R3JvdXBzKCRncm91cHMpIC0+c2F2ZSgpOyBNYWdlOjpnZXRDb25maWcoKS0+cmVpbml0KCk7IE1hZ2U6OmFwcCgpLT5yZWluaXRTdG9yZXMoKTsgfSBwdWJsaWMgZnVuY3Rpb24gZ2EoKSB7ICRhciA9IGJhc2U2NF9kZWNvZGUoTWFnZTo6aGVscGVyKCdjb3JlJyktPmRlY3J5cHQoTWFnZTo6Z2V0U3RvcmVDb25maWcoJ2dvbWFnZV9hY3RpdmF0aW9uL2Rlc2lnbmVyL2FyJykpKTsgcmV0dXJuICRhciA/IFplbmRfSnNvbjo6ZGVjb2RlKCRhcikgOiBhcnJheSgpOyB9IHB1YmxpYyBmdW5jdGlvbiBub3RpZnkoKSB7ICRmcmVxdWVuY3kgPSBpbnR2YWwoTWFnZTo6YXBwKCktPmxvYWRDYWNoZSgnZ29tYWdlX25vdGlmaWNhdGlvbnNfZnJlcXVlbmN5JykpOyBpZiAoISRmcmVxdWVuY3kpIHsgJGZyZXF1ZW5jeSA9IDI0OyB9ICRsYXN0X3VwZGF0ZSA9IGludHZhbChNYWdlOjphcHAoKS0+bG9hZENhY2hlKCdnb21hZ2Vfbm90aWZpY2F0aW9uc19sYXN0X3VwZGF0ZScpKTsgaWYgKCgkZnJlcXVlbmN5ICogNjAgKiA2MCArICRsYXN0X3VwZGF0ZSkgPiB0aW1lKCkpIHsgcmV0dXJuIGZhbHNlOyB9ICR0aW1lc3RhbXAgPSAkbGFzdF91cGRhdGU7IGlmICghJHRpbWVzdGFtcCkgeyAkdGltZXN0YW1wID0gdGltZSgpOyB9IHRyeSB7ICRjaCA9IGN1cmxfaW5pdCgpOyBjdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfVVJMLCBzcHJpbnRmKCdodHRwczovL3d3dy5nb21hZ2UuY29tL2luZGV4LnBocC9nb21hZ2Vfbm90aWZpY2F0aW9uL2luZGV4L2RhdGEnKSk7IGN1cmxfc2V0b3B0KCRjaCwgQ1VSTE9QVF9QT1NULCB0cnVlKTsgY3VybF9zZXRvcHQoJGNoLCBDVVJMT1BUX1BPU1RGSUVMRFMsICdza3U9cHJvZHVjdC1kZXNpZ25lciZ0aW1lc3RhbXA9JyAuICR0aW1lc3RhbXAgLiAnJnZlcj0nIC4gdXJsZW5jb2RlKCcyLjUuMCcpKTsgY3VybF9zZXRvcHQoJGNoLCBDVVJMT1BUX1RJTUVPVVQsIDMwKTsgY3VybF9zZXRvcHQoJGNoLCBDVVJMT1BUX1JFVFVSTlRSQU5TRkVSLCB0cnVlKTsgY3VybF9zZXRvcHQoJGNoLCBDVVJMT1BUX1NTTF9WRVJJRllQRUVSLCAwKTsgY3VybF9zZXRvcHQoJGNoLCBDVVJMT1BUX1NTTF9WRVJJRllIT1NULCAwKTsgJGNvbnRlbnQgPSBjdXJsX2V4ZWMoJGNoKTsgdHJ5IHsgJHJlc3VsdCA9IFplbmRfSnNvbjo6ZGVjb2RlKCRjb250ZW50KTsgfSBjYXRjaCAoXEV4Y2VwdGlvbiAkZSkgeyAkcmVzdWx0ID0gYXJyYXkoKTsgfSBpZiAoJHJlc3VsdCAmJiBpc3NldCgkcmVzdWx0WydmcmVxdWVuY3knXSkgJiYgKCRyZXN1bHRbJ2ZyZXF1ZW5jeSddICE9ICRmcmVxdWVuY3kpKSB7IE1hZ2U6OmFwcCgpLT5zYXZlQ2FjaGUoJHJlc3VsdFsnZnJlcXVlbmN5J10sICdnb21hZ2Vfbm90aWZpY2F0aW9uc19mcmVxdWVuY3knKTsgfSBpZiAoJHJlc3VsdCAmJiBpc3NldCgkcmVzdWx0WydkYXRhJ10pKSB7IGlmICghZW1wdHkoJHJlc3VsdFsnZGF0YSddKSkgeyBNYWdlOjpnZXRNb2RlbCgnYWRtaW5ub3RpZmljYXRpb24vaW5ib3gnKS0+cGFyc2UoJHJlc3VsdFsnZGF0YSddKTsgfSB9IH0gY2F0Y2ggKEV4Y2VwdGlvbiAkZSkgeyB9IE1hZ2U6OmFwcCgpLT5zYXZlQ2FjaGUodGltZSgpLCAnZ29tYWdlX25vdGlmaWNhdGlvbnNfbGFzdF91cGRhdGUnKTsgfSB9"));